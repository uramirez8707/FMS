<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FMS: fms_mod</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FMS
   &#160;<span id="projectnumber">2021.04.0-dev</span>
   </div>
   <div id="projectbrief">Flexible Modeling System</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__fms__mod.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Types</a> &#124;
<a href="#func-members">Functions/Subroutines</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">fms_mod<div class="ingroups"><a class="el" href="group__fms.html">FMS</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>The fms module provides routines that are commonly used by most FMS modules.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Types</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">type &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfms__mod_1_1nml__errors__type.html">nml_errors_type</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Namelist read error values.  <a href="structfms__mod_1_1nml__errors__type.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">interface &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacefms__mod_1_1string.html">string</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a number to a string.  <a href="interfacefms__mod_1_1string.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:ga76099928e3f2e58ea5efe717c7809fce"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fms__mod.html#ga76099928e3f2e58ea5efe717c7809fce">fms_init</a> (localcomm, alt_input_nml_path)</td></tr>
<tr class="memdesc:ga76099928e3f2e58ea5efe717c7809fce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the FMS module and also calls the initialization routines for all modules in the MPP package. Will be called automatically if the user does not call it.  <a href="group__fms__mod.html#ga76099928e3f2e58ea5efe717c7809fce">More...</a><br /></td></tr>
<tr class="separator:ga76099928e3f2e58ea5efe717c7809fce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae5c7420e421293e2be14717dd7b3d97f"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fms__mod.html#gae5c7420e421293e2be14717dd7b3d97f">error_mesg</a> (routine, message, level)</td></tr>
<tr class="memdesc:gae5c7420e421293e2be14717dd7b3d97f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print notes, warnings and error messages; terminates program for warning and error messages. Usage of mpp_error is preferable. (use error levels NOTE,WARNING,FATAL, see example below)  <a href="group__fms__mod.html#gae5c7420e421293e2be14717dd7b3d97f">More...</a><br /></td></tr>
<tr class="separator:gae5c7420e421293e2be14717dd7b3d97f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6695d901d751a75f108c27aa385d9579"><td class="memItemLeft" align="right" valign="top">logical function, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fms__mod.html#ga6695d901d751a75f108c27aa385d9579">fms_error_handler</a> (routine, message, err_msg)</td></tr>
<tr class="memdesc:ga6695d901d751a75f108c27aa385d9579"><td class="mdescLeft">&#160;</td><td class="mdescRight">Facilitates the control of fatal error conditions.  <a href="group__fms__mod.html#ga6695d901d751a75f108c27aa385d9579">More...</a><br /></td></tr>
<tr class="separator:ga6695d901d751a75f108c27aa385d9579"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga05e7686befc1e49d2be9bdb81d479a76"><td class="memItemLeft" align="right" valign="top">integer function, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fms__mod.html#ga05e7686befc1e49d2be9bdb81d479a76">check_nml_error</a> (IOSTAT, NML_NAME)</td></tr>
<tr class="memdesc:ga05e7686befc1e49d2be9bdb81d479a76"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks the iostat argument that is returned after reading a namelist and determines if the error code is valid.  <a href="group__fms__mod.html#ga05e7686befc1e49d2be9bdb81d479a76">More...</a><br /></td></tr>
<tr class="separator:ga05e7686befc1e49d2be9bdb81d479a76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0d71e1611bc61c9aa999c92abe008c45"><td class="memItemLeft" align="right" valign="top"><a id="ga0d71e1611bc61c9aa999c92abe008c45"></a>
subroutine, private&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fms__mod.html#ga0d71e1611bc61c9aa999c92abe008c45">nml_error_init</a></td></tr>
<tr class="memdesc:ga0d71e1611bc61c9aa999c92abe008c45"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines the IOSTAT error value for some common Namelist errors. Also checks if the compiler returns a non-zero status if there are multiple namelist records in a single file. <br /></td></tr>
<tr class="separator:ga0d71e1611bc61c9aa999c92abe008c45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2cb4556e28486de51d4118871fd5acd9"><td class="memItemLeft" align="right" valign="top">logical function, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fms__mod.html#ga2cb4556e28486de51d4118871fd5acd9">string_array_index</a> (<a class="el" href="interfacefms__mod_1_1string.html">string</a>, string_array, index)</td></tr>
<tr class="memdesc:ga2cb4556e28486de51d4118871fd5acd9"><td class="mdescLeft">&#160;</td><td class="mdescRight">match the input character string to a string in an array/list of character strings  <a href="group__fms__mod.html#ga2cb4556e28486de51d4118871fd5acd9">More...</a><br /></td></tr>
<tr class="separator:ga2cb4556e28486de51d4118871fd5acd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae80e64e737312192624678ecd590acd6"><td class="memItemLeft" align="right" valign="top">logical function, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fms__mod.html#gae80e64e737312192624678ecd590acd6">monotonic_array</a> (array, direction)</td></tr>
<tr class="memdesc:gae80e64e737312192624678ecd590acd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines if a real input array has monotonically increasing or decreasing values.  <a href="group__fms__mod.html#gae80e64e737312192624678ecd590acd6">More...</a><br /></td></tr>
<tr class="separator:gae80e64e737312192624678ecd590acd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga18533f06cc06dc0d11ae16f9b7338942"><td class="memItemLeft" align="right" valign="top">character(:) function, allocatable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fms__mod.html#ga18533f06cc06dc0d11ae16f9b7338942">string_from_integer</a> (i)</td></tr>
<tr class="memdesc:ga18533f06cc06dc0d11ae16f9b7338942"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts an integer to a string.  <a href="group__fms__mod.html#ga18533f06cc06dc0d11ae16f9b7338942">More...</a><br /></td></tr>
<tr class="separator:ga18533f06cc06dc0d11ae16f9b7338942"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga04380e51ee749685e98ac96d03856eae"><td class="memItemLeft" align="right" valign="top"><a id="ga04380e51ee749685e98ac96d03856eae"></a>
character(len=32) function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fms__mod.html#ga04380e51ee749685e98ac96d03856eae">string_from_real</a> (a)</td></tr>
<tr class="memdesc:ga04380e51ee749685e98ac96d03856eae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a real to a string. <br /></td></tr>
<tr class="separator:ga04380e51ee749685e98ac96d03856eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0c093df98a75dbd9e0f3add67aa6c23a"><td class="memItemLeft" align="right" valign="top"><a id="ga0c093df98a75dbd9e0f3add67aa6c23a"></a>
subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fms__mod.html#ga0c093df98a75dbd9e0f3add67aa6c23a">write_version_number</a> (version, tag, unit)</td></tr>
<tr class="memdesc:ga0c093df98a75dbd9e0f3add67aa6c23a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints to the log file (or a specified unit) the version id string and tag name. <br /></td></tr>
<tr class="separator:ga0c093df98a75dbd9e0f3add67aa6c23a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga4422f1543997b447d925821d54e7252a"><td class="memItemLeft" align="right" valign="top"><a id="ga4422f1543997b447d925821d54e7252a"></a>
logical&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fms__mod.html#ga4422f1543997b447d925821d54e7252a">read_all_pe</a> = .true.</td></tr>
<tr class="memdesc:ga4422f1543997b447d925821d54e7252a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read global data on all processors extracting local part needed (TRUE) or read global data on PE0 and broadcast to all PEs(FALSE). <br /></td></tr>
<tr class="separator:ga4422f1543997b447d925821d54e7252a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4b46c985d2a99c5a87f1733b1749e892"><td class="memItemLeft" align="right" valign="top"><a id="ga4b46c985d2a99c5a87f1733b1749e892"></a>
character(len=16)&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fms__mod.html#ga4b46c985d2a99c5a87f1733b1749e892">clock_grain</a> = 'NONE'</td></tr>
<tr class="memdesc:ga4b46c985d2a99c5a87f1733b1749e892"><td class="mdescLeft">&#160;</td><td class="mdescRight">The level of clock granularity used for performance timing sections of code. Possible values in order of increasing detail are: 'NONE', 'COMPONENT', 'SUBCOMPONENT', 'MODULE_DRIVER', 'MODULE', 'ROUTINE', 'LOOP', and 'INFRA'. Code sections are defined using routines in MPP module: mpp_clock_id, mpp_clock_begin, and mpp_clock_end. The fms module makes these routines public. A list of timed code sections will be printed to STDOUT. See the <a class="el" href="group__mpp__mod.html">mpp_mod</a> module for more details. <br /></td></tr>
<tr class="separator:ga4b46c985d2a99c5a87f1733b1749e892"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad1925a5c08b19f3412af60515e4e6321"><td class="memItemLeft" align="right" valign="top"><a id="gad1925a5c08b19f3412af60515e4e6321"></a>
character(len=16)&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fms__mod.html#gad1925a5c08b19f3412af60515e4e6321">clock_flags</a> ='NONE'</td></tr>
<tr class="memdesc:gad1925a5c08b19f3412af60515e4e6321"><td class="mdescLeft">&#160;</td><td class="mdescRight">Possible values are 'NONE', 'SYNC', or 'DETAILED'. SYNC will give accurate information on load balance of the clocked portion of code. DETAILED also turns on detailed message-passing performance diagnosis. Both SYNC and DETAILED will work correctly on innermost clock nest and distort outer clocks, and possibly the overall code time. See the <a class="el" href="group__mpp__mod.html">mpp_mod</a> module for more details. <br /></td></tr>
<tr class="separator:gad1925a5c08b19f3412af60515e4e6321"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga19036b5d0d3973d75e541700506919f2"><td class="memItemLeft" align="right" valign="top"><a id="ga19036b5d0d3973d75e541700506919f2"></a>
character(len=8)&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fms__mod.html#ga19036b5d0d3973d75e541700506919f2">warning_level</a> = 'warning'</td></tr>
<tr class="memdesc:ga19036b5d0d3973d75e541700506919f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the termination condition for the WARNING flag to interfaces error_mesg/mpp_error. set warning_level = 'fatal' (program crashes for warning messages) or 'warning' (prints warning message and continues). <br /></td></tr>
<tr class="separator:ga19036b5d0d3973d75e541700506919f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaebceb5b06d9009d61504648bc4865786"><td class="memItemLeft" align="right" valign="top"><a id="gaebceb5b06d9009d61504648bc4865786"></a>
integer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fms__mod.html#gaebceb5b06d9009d61504648bc4865786">stack_size</a> = 0</td></tr>
<tr class="memdesc:gaebceb5b06d9009d61504648bc4865786"><td class="mdescLeft">&#160;</td><td class="mdescRight">The size in words of the MPP user stack. If stack_size &gt; 0, the following MPP routine is called: call mpp_set_stack_size (stack_size). If stack_size = 0 (default) then the default size set by mpp_mod is used. <br /></td></tr>
<tr class="separator:gaebceb5b06d9009d61504648bc4865786"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7460ed347f0eebbfe05fe3f60863a8cf"><td class="memItemLeft" align="right" valign="top"><a id="ga7460ed347f0eebbfe05fe3f60863a8cf"></a>
integer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fms__mod.html#ga7460ed347f0eebbfe05fe3f60863a8cf">domains_stack_size</a> = 0</td></tr>
<tr class="memdesc:ga7460ed347f0eebbfe05fe3f60863a8cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">The size in words of the MPP_DOMAINS user stack. If domains_stack_size &gt; 0, the following MPP_DOMAINS routine is called: call mpp_domains_set_stack_size (domains_stack_size). If domains_stack_size = 0 (default) then the default size set by <a class="el" href="group__mpp__domains__mod.html">mpp_domains_mod</a> is used. <br /></td></tr>
<tr class="separator:ga7460ed347f0eebbfe05fe3f60863a8cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga78f0d71e88638662c5f3ee5175f24d85"><td class="memItemLeft" align="right" valign="top"><a id="ga78f0d71e88638662c5f3ee5175f24d85"></a>
logical, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fms__mod.html#ga78f0d71e88638662c5f3ee5175f24d85">print_memory_usage</a> = .FALSE.</td></tr>
<tr class="memdesc:ga78f0d71e88638662c5f3ee5175f24d85"><td class="mdescLeft">&#160;</td><td class="mdescRight">If set to .TRUE., memory usage statistics will be printed at various points in the code. It is used to study memory usage, e.g to detect memory leaks. <br /></td></tr>
<tr class="separator:ga78f0d71e88638662c5f3ee5175f24d85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga02cde751a71d9b42ced5e3c300805f2e"><td class="memItemLeft" align="right" valign="top"><a id="ga02cde751a71d9b42ced5e3c300805f2e"></a>
integer, private&#160;</td><td class="memItemRight" valign="bottom"><b>num_nml_error_codes</b></td></tr>
<tr class="separator:ga02cde751a71d9b42ced5e3c300805f2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga12c1ce70bb3b9275cc49b79e75de0d8d"><td class="memItemLeft" align="right" valign="top"><a id="ga12c1ce70bb3b9275cc49b79e75de0d8d"></a>
integer, dimension(20), private&#160;</td><td class="memItemRight" valign="bottom"><b>nml_error_codes</b></td></tr>
<tr class="separator:ga12c1ce70bb3b9275cc49b79e75de0d8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa4d51133301c44a4a974eda285c057ec"><td class="memItemLeft" align="right" valign="top"><a id="gaa4d51133301c44a4a974eda285c057ec"></a>
logical, private&#160;</td><td class="memItemRight" valign="bottom"><b>do_nml_error_init</b> = .true.</td></tr>
<tr class="separator:gaa4d51133301c44a4a974eda285c057ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad369225c254bc7bda087334ca5d13096"><td class="memItemLeft" align="right" valign="top"><a id="gad369225c254bc7bda087334ca5d13096"></a>
logical&#160;</td><td class="memItemRight" valign="bottom"><b>module_is_initialized</b> = .FALSE.</td></tr>
<tr class="separator:gad369225c254bc7bda087334ca5d13096"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabd60d28a9fe40d764061faf539017017"><td class="memItemLeft" align="right" valign="top"><a id="gabd60d28a9fe40d764061faf539017017"></a>
logical, private&#160;</td><td class="memItemRight" valign="bottom"><b>fms_io_initialized</b> = .FALSE.</td></tr>
<tr class="separator:gabd60d28a9fe40d764061faf539017017"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac17a7d67ed047c03c55c0015851b1f9d"><td class="memItemLeft" align="right" valign="top"><a id="gac17a7d67ed047c03c55c0015851b1f9d"></a>
logical, private&#160;</td><td class="memItemRight" valign="bottom"><b>used</b></td></tr>
<tr class="separator:gac17a7d67ed047c03c55c0015851b1f9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga17ad30be155a6ed8333bd9d94d860e49"><td class="memItemLeft" align="right" valign="top"><a id="ga17ad30be155a6ed8333bd9d94d860e49"></a>
logical, private&#160;</td><td class="memItemRight" valign="bottom"><b>to</b></td></tr>
<tr class="separator:ga17ad30be155a6ed8333bd9d94d860e49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1e152f2e27b87c2897f6e016cb508c83"><td class="memItemLeft" align="right" valign="top"><a id="ga1e152f2e27b87c2897f6e016cb508c83"></a>
logical, private&#160;</td><td class="memItemRight" valign="bottom"><b>make</b></td></tr>
<tr class="separator:ga1e152f2e27b87c2897f6e016cb508c83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa83a0dd38b7142b1863afc4c6dacf135"><td class="memItemLeft" align="right" valign="top"><a id="gaa83a0dd38b7142b1863afc4c6dacf135"></a>
logical, private&#160;</td><td class="memItemRight" valign="bottom"><b>sure</b></td></tr>
<tr class="separator:gaa83a0dd38b7142b1863afc4c6dacf135"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad78fc2d65a2e6be1cb7cec1087ef7d4a"><td class="memItemLeft" align="right" valign="top"><a id="gad78fc2d65a2e6be1cb7cec1087ef7d4a"></a>
logical, private&#160;</td><td class="memItemRight" valign="bottom"><b>fms_io</b></td></tr>
<tr class="separator:gad78fc2d65a2e6be1cb7cec1087ef7d4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga972eb100f87c43f1bff62f62a45efeea"><td class="memItemLeft" align="right" valign="top"><a id="ga972eb100f87c43f1bff62f62a45efeea"></a>
logical, private&#160;</td><td class="memItemRight" valign="bottom"><b>version</b></td></tr>
<tr class="separator:ga972eb100f87c43f1bff62f62a45efeea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadb6fda35ab4181ca23be9c2d7812ebce"><td class="memItemLeft" align="right" valign="top"><a id="gadb6fda35ab4181ca23be9c2d7812ebce"></a>
logical, private&#160;</td><td class="memItemRight" valign="bottom"><b>is</b></td></tr>
<tr class="separator:gadb6fda35ab4181ca23be9c2d7812ebce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga75f6af47ddac380527238a1be183d2ff"><td class="memItemLeft" align="right" valign="top"><a id="ga75f6af47ddac380527238a1be183d2ff"></a>
logical, private&#160;</td><td class="memItemRight" valign="bottom"><b>only</b></td></tr>
<tr class="separator:ga75f6af47ddac380527238a1be183d2ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The fms module provides routines that are commonly used by most FMS modules. </p>
<dl class="section author"><dt>Author</dt><dd>Bruce Wyman</dd></dl>
<p>Here is a summary of the functions performed by routines in the fms module.</p>
<ol type="1">
<li>Output module version numbers to a common (<code>log</code>) file using a common format.<br  />
</li>
<li>Open specific types of files common to many FMS modules. These include namelist files, restart files, and 32-bit IEEE data files. There also is a matching interface to close the files. If other file types are needed the <code>mpp_open</code> and <code>mpp_close</code> interfaces in module <a class="el" href="group__mpp__io__mod.html">mpp_io_mod</a> must be used.<br  />
</li>
<li>Read and write distributed data to simple native unformatted files. This type of file (called a restart file) is used to checkpoint model integrations for a subsequent restart of the run.<br  />
</li>
<li>For convenience there are several routines published from the <a class="el" href="group__mpp.html">MPP</a> module. These are routines for getting processor numbers, commonly used I/O unit numbers, error handling, and timing sections of code. </li>
</ol>
<h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="ga05e7686befc1e49d2be9bdb81d479a76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga05e7686befc1e49d2be9bdb81d479a76">&#9670;&nbsp;</a></span>check_nml_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">integer function, public fms_mod::check_nml_error </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>IOSTAT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>NML_NAME</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks the iostat argument that is returned after reading a namelist and determines if the error code is valid. </p>
<dl class="section return"><dt>Returns</dt><dd>This function returns the input iostat value (integer) if it is an allowable error code. If the iostat error code is not allowable, an error message is printed and the program terminated.</dd></dl>
<p>The FMS allows multiple namelist records to reside in the same file. Use this interface to check the iostat argument that is returned after reading a record from the namelist file. If an invalid iostat value is detected this routine will produce a fatal error. See the NOTE below.</p>
<p>Some compilers will return non-zero iostat values when reading through files with multiple namelist. This routine will try skip these errors and only terminate for true namelist errors.</p>
<p><br  />
Examples<br  />
</p>
<p>The following example checks if a file exists, reads a namelist input from that file, and checks for errors in that namelist. When the correct namelist is read and it has no errors the routine check_nml_error will return zero and the while loop will exit. This code segment should be used to read namelist files. </p><div class="fragment"><div class="line"><span class="keywordtype">integer</span> :: ierr, io</div>
<div class="line"> </div>
<div class="line"><span class="keyword">read</span> (input_nml_file, fms_nml, iostat=io)</div>
<div class="line">ierr = check_nml_error(io,<span class="stringliteral">&#39;fms_nml&#39;</span>)</div>
</div><!-- fragment --> <dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">FATAL,Unknown</td><td>error while reading namelist ...., (IOSTAT = ####) There was an error reading the namelist specified. Carefully examine all namelist and variables for anything incorrect (e.g. malformed, hidden characters).</td></tr>
    <tr><td class="paramname">FATAL,Unknown</td><td>namelist, or mistyped namelist variable in namelist ...., (IOSTAT = ####) The name list given doesn't exist in the namelist file, or a variable in the namelist is mistyped or isn't a namelist variable. </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">iostat</td><td>The iostat value returned when reading a namelist record. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nml_name</td><td>The name of the namelist. This name will be printed if an error is encountered, otherwise the name is not used. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fms_8F90_source.html#l00556">556</a> of file <a class="el" href="fms_8F90_source.html">fms.F90</a>.</p>

</div>
</div>
<a id="gae5c7420e421293e2be14717dd7b3d97f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae5c7420e421293e2be14717dd7b3d97f">&#9670;&nbsp;</a></span>error_mesg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public fms_mod::error_mesg </td>
          <td>(</td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>routine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Print notes, warnings and error messages; terminates program for warning and error messages. Usage of mpp_error is preferable. (use error levels NOTE,WARNING,FATAL, see example below) </p>
<p>Print notes, warnings and error messages; and terminates the program for error messages. This routine is a wrapper around mpp_error, and is provided for backward compatibility. This module also publishes mpp_error, <b>users should try to use the mpp_error interface</b>.</p>
<p><br  />
Example usage: </p><div class="fragment"><div class="line"><span class="keywordtype">use </span>fms_mod, <span class="keywordtype">only</span>: <a class="code" href="group__fms__mod.html#gae5c7420e421293e2be14717dd7b3d97f">error_mesg</a>, fatal, note</div>
<div class="line"><span class="keyword">call </span><a class="code" href="group__fms__mod.html#gae5c7420e421293e2be14717dd7b3d97f">error_mesg</a> (<span class="stringliteral">&#39;fms_mod&#39;</span>, <span class="stringliteral">&#39;initialization not called&#39;</span>, fatal)</div>
<div class="line"><span class="keyword">call </span><a class="code" href="group__fms__mod.html#gae5c7420e421293e2be14717dd7b3d97f">error_mesg</a> (<span class="stringliteral">&#39;fms_mod&#39;</span>, <span class="stringliteral">&#39;fms_mod message&#39;</span>, note)</div>
</div><!-- fragment --> <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">routine</td><td>Routine name where the warning or error has occurred. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">message</td><td>Warning or error message to be printed. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">level</td><td>Level of severity; set to NOTE, WARNING, or FATAL Termination always occurs for FATAL, never for NOTE, and is settable for WARNING (see namelist). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fms_8F90_source.html#l00474">474</a> of file <a class="el" href="fms_8F90_source.html">fms.F90</a>.</p>

</div>
</div>
<a id="ga6695d901d751a75f108c27aa385d9579"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6695d901d751a75f108c27aa385d9579">&#9670;&nbsp;</a></span>fms_error_handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">logical function, public fms_mod::fms_error_handler </td>
          <td>(</td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>routine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(out), optional&#160;</td>
          <td class="paramname"><em>err_msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Facilitates the control of fatal error conditions. </p>
<p>When err_msg is present, message is copied into err_msg and the function returns a value of .true. Otherwise calls mpp_error to terminate execution. The intended use is as shown below. </p><dl class="section return"><dt>Returns</dt><dd>true when err_msg is present <div class="fragment"><div class="line"><span class="keywordflow">if</span>(fms_error_handler(routine, message, err_msg)) return</div>
</div><!-- fragment --> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">routine</td><td>Routine name where the fatal error has occurred. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">message</td><td>fatal error message to be printed. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">err_msg</td><td>When err_msg is present: err_msg = message </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fms_8F90_source.html#l00501">501</a> of file <a class="el" href="fms_8F90_source.html">fms.F90</a>.</p>

</div>
</div>
<a id="ga76099928e3f2e58ea5efe717c7809fce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga76099928e3f2e58ea5efe717c7809fce">&#9670;&nbsp;</a></span>fms_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public fms_mod::fms_init </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in), optional&#160;</td>
          <td class="paramname"><em>localcomm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in), optional&#160;</td>
          <td class="paramname"><em>alt_input_nml_path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the FMS module and also calls the initialization routines for all modules in the MPP package. Will be called automatically if the user does not call it. </p>
<p>Initialization routine for the fms module. It also calls initialization routines for the mpp, mpp_domains, and mpp_io modules. Although this routine will be called automatically by other fms_mod routines, users should explicitly call fms_init. If this routine is called more than once it will return silently. There are no arguments.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">FATAL,invalid</td><td>entry for namelist variable warning_level The namelist variable warning_level must be either 'fatal' or 'warning'(case-insensitive)</td></tr>
    <tr><td class="paramname">FATAL,invalid</td><td>entry for namelist variable clock_grain The namelist variable clock_grain must be one of the following values: 'NONE', 'COMPONENT', 'SUBCOMPONENT', 'MODULE_DRIVER', 'MODULE', 'ROUTINE', 'LOOP', or 'INFRA' (case-insensitive). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fms_8F90_source.html#l00325">325</a> of file <a class="el" href="fms_8F90_source.html">fms.F90</a>.</p>

</div>
</div>
<a id="gae80e64e737312192624678ecd590acd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae80e64e737312192624678ecd590acd6">&#9670;&nbsp;</a></span>monotonic_array()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">logical function, public fms_mod::monotonic_array </td>
          <td>(</td>
          <td class="paramtype">real, dimension(:), intent(in)&#160;</td>
          <td class="paramname"><em>array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out), optional&#160;</td>
          <td class="paramname"><em>direction</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determines if a real input array has monotonically increasing or decreasing values. </p>
<dl class="section return"><dt>Returns</dt><dd>If the input array of real values either increases or decreases monotonically then true is returned, otherwise false is returned. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">array</td><td>An array of real values. If the size(array) &lt; 2 this function assumes the array is not monotonic, no fatal error will occur. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">direction</td><td>If the input array is: <blockquote class="doxtable">
<blockquote class="doxtable">
<p>monotonic (small to large) then direction = +1. monotonic (large to small) then direction = -1. not monotonic then direction = 0. </p>
</blockquote>
</blockquote>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If the input array of real values either increases or decreases monotonically then TRUE is returned, otherwise FALSE is returned. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fms_8F90_source.html#l00736">736</a> of file <a class="el" href="fms_8F90_source.html">fms.F90</a>.</p>

</div>
</div>
<a id="ga2cb4556e28486de51d4118871fd5acd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2cb4556e28486de51d4118871fd5acd9">&#9670;&nbsp;</a></span>string_array_index()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">logical function, public fms_mod::string_array_index </td>
          <td>(</td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), dimension(:), intent(in)&#160;</td>
          <td class="paramname"><em>string_array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out), optional&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>match the input character string to a string in an array/list of character strings </p>
<dl class="section return"><dt>Returns</dt><dd>If an exact match was found then true is returned, otherwise false is returned.</dd></dl>
<p>Tries to find a match for a character string in a list of character strings. The match is case sensitive and disregards blank characters to the right of the string.</p>
<p><br  />
Examples<br  />
 </p><div class="fragment"><div class="line"><a class="code" href="interfacefms__mod_1_1string.html">string</a> = <span class="stringliteral">&quot;def&quot;</span></div>
<div class="line">string_array = (/ <span class="stringliteral">&quot;abcd&quot;</span>, <span class="stringliteral">&quot;def &quot;</span>, <span class="stringliteral">&quot;fghi&quot;</span> /)</div>
<div class="line"> </div>
<div class="line">string_array_index( <a class="code" href="interfacefms__mod_1_1string.html">string</a>, string_array, index )</div>
</div><!-- fragment --><p> Returns: TRUE, index = 2 </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">string</td><td>Character string of arbitrary length. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">string_array</td><td>Array/list of character strings. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">index</td><td>The index of string_array where the first match was found. If no match was found then index = 0. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If an exact match was found then TRUE is returned, otherwise FALSE is returned. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fms_8F90_source.html#l00705">705</a> of file <a class="el" href="fms_8F90_source.html">fms.F90</a>.</p>

</div>
</div>
<a id="ga18533f06cc06dc0d11ae16f9b7338942"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga18533f06cc06dc0d11ae16f9b7338942">&#9670;&nbsp;</a></span>string_from_integer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">character(:) function, allocatable fms_mod::string_from_integer </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>i</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Converts an integer to a string. </p>
<p>This has been updated from the fms_io function. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">i</td><td>Integer to be converted to a string </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>String converted frominteger </dd></dl>

<p class="definition">Definition at line <a class="el" href="fms_8F90_source.html#l00779">779</a> of file <a class="el" href="fms_8F90_source.html">fms.F90</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="ainterfacefms__mod_1_1string_html"><div class="ttname"><a href="interfacefms__mod_1_1string.html">fms_mod::string</a></div><div class="ttdoc">Converts a number to a string.</div><div class="ttdef"><b>Definition:</b> <a href="fms_8F90_source.html#l00297">fms.F90:297</a></div></div>
<div class="ttc" id="agroup__fms__mod_html_gae5c7420e421293e2be14717dd7b3d97f"><div class="ttname"><a href="group__fms__mod.html#gae5c7420e421293e2be14717dd7b3d97f">fms_mod::error_mesg</a></div><div class="ttdeci">subroutine, public error_mesg(routine, message, level)</div><div class="ttdoc">Print notes, warnings and error messages; terminates program for warning and error messages....</div><div class="ttdef"><b>Definition:</b> <a href="fms_8F90_source.html#l00474">fms.F90:474</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
