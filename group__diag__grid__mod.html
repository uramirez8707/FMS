<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FMS: diag_grid_mod</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FMS
   &#160;<span id="projectnumber">2021.04.0-dev</span>
   </div>
   <div id="projectbrief">Flexible Modeling System</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__diag__grid__mod.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Types</a> &#124;
<a href="#func-members">Functions/Subroutines</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">diag_grid_mod<div class="ingroups"><a class="el" href="group__diag__manager.html">Diag Manager</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>diag_grid_mod is a set of procedures to work with the model's global grid to allow regional output.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Types</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">type &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdiag__grid__mod_1_1diag__global__grid__type.html">diag_global_grid_type</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Private type to hold the model's global grid data, and other grid information for use in this module.  <a href="structdiag__grid__mod_1_1diag__global__grid__type.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">type &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdiag__grid__mod_1_1point.html">point</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Private type to hold the corresponding (x,y,z) location for a (lat,lon) location.  <a href="structdiag__grid__mod_1_1point.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:ga344fd60b0703604265c527332794df35"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__diag__grid__mod.html#ga344fd60b0703604265c527332794df35">diag_grid_init</a> (domain, glo_lat, glo_lon, aglo_lat, aglo_lon)</td></tr>
<tr class="memdesc:ga344fd60b0703604265c527332794df35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send the global grid to the <code>diag_manager_mod</code> for regional output.  <a href="group__diag__grid__mod.html#ga344fd60b0703604265c527332794df35">More...</a><br /></td></tr>
<tr class="separator:ga344fd60b0703604265c527332794df35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5e5a7eeabed97e40f69b0167e44b1330"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__diag__grid__mod.html#ga5e5a7eeabed97e40f69b0167e44b1330">diag_grid_end</a> ()</td></tr>
<tr class="memdesc:ga5e5a7eeabed97e40f69b0167e44b1330"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unallocate the diag_global_grid variable.  <a href="group__diag__grid__mod.html#ga5e5a7eeabed97e40f69b0167e44b1330">More...</a><br /></td></tr>
<tr class="separator:ga5e5a7eeabed97e40f69b0167e44b1330"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacd48f9784c8244ff7edc7c98f1ad51cd"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__diag__grid__mod.html#gacd48f9784c8244ff7edc7c98f1ad51cd">get_local_indexes</a> (latStart, latEnd, lonStart, lonEnd, istart, iend, jstart, jend)</td></tr>
<tr class="memdesc:gacd48f9784c8244ff7edc7c98f1ad51cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the local start and local end indexes on the local PE for regional output.  <a href="group__diag__grid__mod.html#gacd48f9784c8244ff7edc7c98f1ad51cd">More...</a><br /></td></tr>
<tr class="separator:gacd48f9784c8244ff7edc7c98f1ad51cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8809db19aeaef7fbd8a30a94017a45af"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__diag__grid__mod.html#ga8809db19aeaef7fbd8a30a94017a45af">get_local_indexes2</a> (lat, lon, iindex, jindex)</td></tr>
<tr class="memdesc:ga8809db19aeaef7fbd8a30a94017a45af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the indices of the nearest grid point of the a-grid to the specified (lon,lat) location on the local PE. if desired point not within domain of local PE, return (0,0) as the indices.  <a href="group__diag__grid__mod.html#ga8809db19aeaef7fbd8a30a94017a45af">More...</a><br /></td></tr>
<tr class="separator:ga8809db19aeaef7fbd8a30a94017a45af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafbf2ec20333592de7c79ad330b61ad2f"><td class="memItemLeft" align="right" valign="top">pure elemental real function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__diag__grid__mod.html#gafbf2ec20333592de7c79ad330b61ad2f">rad2deg</a> (angle)</td></tr>
<tr class="separator:gafbf2ec20333592de7c79ad330b61ad2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7c106eac542c18e69fa010f358067b65"><td class="memItemLeft" align="right" valign="top">pure elemental real function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__diag__grid__mod.html#ga7c106eac542c18e69fa010f358067b65">deg2rad</a> (angle)</td></tr>
<tr class="memdesc:ga7c106eac542c18e69fa010f358067b65"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert an angle in degrees to radians.  <a href="group__diag__grid__mod.html#ga7c106eac542c18e69fa010f358067b65">More...</a><br /></td></tr>
<tr class="separator:ga7c106eac542c18e69fa010f358067b65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad7bbed343758af1b76821fdf435217c1"><td class="memItemLeft" align="right" valign="top">pure integer function, dimension(2)&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__diag__grid__mod.html#gad7bbed343758af1b76821fdf435217c1">find_pole_index_agrid</a> (lat, lon)</td></tr>
<tr class="memdesc:gad7bbed343758af1b76821fdf435217c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the closest index (i,j) to the given (lat,lon) point.  <a href="group__diag__grid__mod.html#gad7bbed343758af1b76821fdf435217c1">More...</a><br /></td></tr>
<tr class="separator:gad7bbed343758af1b76821fdf435217c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga300b2a27d9538e7a8df1acfe6eb5313b"><td class="memItemLeft" align="right" valign="top">pure integer function, dimension(2)&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__diag__grid__mod.html#ga300b2a27d9538e7a8df1acfe6eb5313b">find_equator_index_agrid</a> (lat, lon)</td></tr>
<tr class="memdesc:ga300b2a27d9538e7a8df1acfe6eb5313b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the closest index (i,j) to the given (lat,lon) point.  <a href="group__diag__grid__mod.html#ga300b2a27d9538e7a8df1acfe6eb5313b">More...</a><br /></td></tr>
<tr class="separator:ga300b2a27d9538e7a8df1acfe6eb5313b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga38d32aee9fb2540ffdfb50354b799023"><td class="memItemLeft" align="right" valign="top">pure elemental type(<a class="el" href="structdiag__grid__mod_1_1point.html">point</a>) function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__diag__grid__mod.html#ga38d32aee9fb2540ffdfb50354b799023">latlon2xyz</a> (lat, lon)</td></tr>
<tr class="memdesc:ga38d32aee9fb2540ffdfb50354b799023"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the (x,y,z) position of a given (lat,lon) point.  <a href="group__diag__grid__mod.html#ga38d32aee9fb2540ffdfb50354b799023">More...</a><br /></td></tr>
<tr class="separator:ga38d32aee9fb2540ffdfb50354b799023"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga19ed6b7dc3d1bf191172f00fef6a7677"><td class="memItemLeft" align="right" valign="top">pure elemental real function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__diag__grid__mod.html#ga19ed6b7dc3d1bf191172f00fef6a7677">distancesqrd</a> (pt1, pt2)</td></tr>
<tr class="memdesc:ga19ed6b7dc3d1bf191172f00fef6a7677"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the distance between two points in the Cartesian coordinate space.  <a href="group__diag__grid__mod.html#ga19ed6b7dc3d1bf191172f00fef6a7677">More...</a><br /></td></tr>
<tr class="separator:ga19ed6b7dc3d1bf191172f00fef6a7677"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga455fb5cb69db5917fc63612dcd5088cf"><td class="memItemLeft" align="right" valign="top">pure elemental real function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__diag__grid__mod.html#ga455fb5cb69db5917fc63612dcd5088cf">gcirdistance</a> (lat1, lon1, lat2, lon2)</td></tr>
<tr class="memdesc:ga455fb5cb69db5917fc63612dcd5088cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the distance, along the geodesic, between two points.  <a href="group__diag__grid__mod.html#ga455fb5cb69db5917fc63612dcd5088cf">More...</a><br /></td></tr>
<tr class="separator:ga455fb5cb69db5917fc63612dcd5088cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae5f402a0116ea61620bb6d8c5eac36cd"><td class="memItemLeft" align="right" valign="top"><a id="gae5f402a0116ea61620bb6d8c5eac36cd"></a>
subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__diag__grid__mod.html#gae5f402a0116ea61620bb6d8c5eac36cd">find_nearest_agrid_index</a> (lat, lon, minI, minJ, minimum_distance)</td></tr>
<tr class="memdesc:gae5f402a0116ea61620bb6d8c5eac36cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the i,j indices and distance of the a-grid point nearest to the inputted lat,lon point. <br /></td></tr>
<tr class="separator:gae5f402a0116ea61620bb6d8c5eac36cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga53e348963b34cc198fb5dcf065d7fcc5"><td class="memItemLeft" align="right" valign="top"><a id="ga53e348963b34cc198fb5dcf065d7fcc5"></a>
type(<a class="el" href="structdiag__grid__mod_1_1diag__global__grid__type.html">diag_global_grid_type</a>)&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__diag__grid__mod.html#ga53e348963b34cc198fb5dcf065d7fcc5">diag_global_grid</a></td></tr>
<tr class="memdesc:ga53e348963b34cc198fb5dcf065d7fcc5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Variable to hold the global grid data. <br /></td></tr>
<tr class="separator:ga53e348963b34cc198fb5dcf065d7fcc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5b81ca171d240b2f550afcb9f8cbccdc"><td class="memItemLeft" align="right" valign="top"><a id="ga5b81ca171d240b2f550afcb9f8cbccdc"></a>
logical&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__diag__grid__mod.html#ga5b81ca171d240b2f550afcb9f8cbccdc">diag_grid_initialized</a> = .FALSE.</td></tr>
<tr class="memdesc:ga5b81ca171d240b2f550afcb9f8cbccdc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates if the diag_grid_mod has been initialized. <br /></td></tr>
<tr class="separator:ga5b81ca171d240b2f550afcb9f8cbccdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>diag_grid_mod is a set of procedures to work with the model's global grid to allow regional output. </p>
<dl class="section author"><dt>Author</dt><dd>Seth Underwood <a href="#" onclick="location.href='mai'+'lto:'+'set'+'h.'+'und'+'er'+'woo'+'d@'+'noa'+'a.'+'gov'; return false;">seth.<span style="display: none;">.nosp@m.</span>unde<span style="display: none;">.nosp@m.</span>rwood<span style="display: none;">.nosp@m.</span>@noa<span style="display: none;">.nosp@m.</span>a.gov</a></dd></dl>
<p><code>diag_grid_mod</code> contains useful utilities for dealing with, mostly, regional output for grids other than the standard lat/lon grid. This module contains three public procedures <code> diag_grid_init</code>, which is shared globably in the <code> diag_manager_mod</code>, <code>diag_grid_end</code> which will free up memory used during the register field calls, and <code>get_local_indexes</code>. The <code>send_global_grid</code> procedure is called by the model that creates the global grid. <code>send_global_grid</code> needs to be called before any fields are registered that will output only regions. <code>get_local_indexes</code> is to be called by the <code>diag_manager_mod</code> to discover the global indexes defining a subregion on the tile. </p>
<h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="ga7c106eac542c18e69fa010f358067b65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7c106eac542c18e69fa010f358067b65">&#9670;&nbsp;</a></span>deg2rad()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pure elemental real function diag_grid_mod::deg2rad </td>
          <td>(</td>
          <td class="paramtype">real, intent(in)&#160;</td>
          <td class="paramname"><em>angle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert an angle in degrees to radians. </p>
<p>Given a scalar, or an array of angles in degrees this function will return a scalar or array (of the same dimension) of angles in radians. </p><dl class="section return"><dt>Returns</dt><dd>Scalar or array (depending on the size of angle) of angles in radians. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">angle</td><td>Scalar or array of angles in degrees. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="diag__grid_8F90_source.html#l00646">646</a> of file <a class="el" href="diag__grid_8F90_source.html">diag_grid.F90</a>.</p>

</div>
</div>
<a id="ga5e5a7eeabed97e40f69b0167e44b1330"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5e5a7eeabed97e40f69b0167e44b1330">&#9670;&nbsp;</a></span>diag_grid_end()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public diag_grid_mod::diag_grid_end</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unallocate the diag_global_grid variable. </p>
<p>The <code>diag_global_grid</code> variable is only needed during the register field calls, and then only if there are fields requestion regional output. Once all the register fields calls are complete (before the first <code>send_data</code> call this procedure can be called to free up memory. </p>

<p class="definition">Definition at line <a class="el" href="diag__grid_8F90_source.html#l00299">299</a> of file <a class="el" href="diag__grid_8F90_source.html">diag_grid.F90</a>.</p>

</div>
</div>
<a id="ga344fd60b0703604265c527332794df35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga344fd60b0703604265c527332794df35">&#9670;&nbsp;</a></span>diag_grid_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public diag_grid_mod::diag_grid_init </td>
          <td>(</td>
          <td class="paramtype">type(domain2d), intent(in)&#160;</td>
          <td class="paramname"><em>domain</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:,:), intent(in)&#160;</td>
          <td class="paramname"><em>glo_lat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:,:), intent(in)&#160;</td>
          <td class="paramname"><em>glo_lon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:,:), intent(in)&#160;</td>
          <td class="paramname"><em>aglo_lat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:,:), intent(in)&#160;</td>
          <td class="paramname"><em>aglo_lon</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send the global grid to the <code>diag_manager_mod</code> for regional output. </p>
<p>In order for the diag_manager to do regional output for grids other than the standard lat/lon grid, the <code> diag_manager_mod</code> needs to know the the latitude and longitude values for the entire global grid. This procedure is the mechanism the models will use to share their grid with the diagnostic manager.</p>
<p>This procedure needs to be called after the grid is created, and before the first call to register the fields. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">domain</td><td>The domain to which the grid data corresponds. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">glo_lat</td><td>The latitude information for the grid tile. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">glo_lon</td><td>The longitude information for the grid tile. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">aglo_lat</td><td>The latitude information for the a-grid tile. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">aglo_lon</td><td>The longitude information for the a-grid tile. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="diag__grid_8F90_source.html#l00134">134</a> of file <a class="el" href="diag__grid_8F90_source.html">diag_grid.F90</a>.</p>

</div>
</div>
<a id="ga19ed6b7dc3d1bf191172f00fef6a7677"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga19ed6b7dc3d1bf191172f00fef6a7677">&#9670;&nbsp;</a></span>distancesqrd()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pure elemental real function diag_grid_mod::distancesqrd </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structdiag__grid__mod_1_1point.html">point</a>), intent(in)&#160;</td>
          <td class="paramname"><em>pt1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structdiag__grid__mod_1_1point.html">point</a>), intent(in)&#160;</td>
          <td class="paramname"><em>pt2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find the distance between two points in the Cartesian coordinate space. </p>
<p><code>distanceSqrd</code> will find the distance squared between two points in the xyz coordinate space. <code>pt1</code> and <code> pt2</code> can either be both scalars, both arrays of the same size, or one a scalar and one an array. The return value will be a scalar or array of the same size as the input array. </p><dl class="section return"><dt>Returns</dt><dd>The return value will be a scalar or array of the same size as the input array. </dd></dl>

<p class="definition">Definition at line <a class="el" href="diag__grid_8F90_source.html#l01004">1004</a> of file <a class="el" href="diag__grid_8F90_source.html">diag_grid.F90</a>.</p>

</div>
</div>
<a id="ga300b2a27d9538e7a8df1acfe6eb5313b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga300b2a27d9538e7a8df1acfe6eb5313b">&#9670;&nbsp;</a></span>find_equator_index_agrid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pure integer function, dimension(2) diag_grid_mod::find_equator_index_agrid </td>
          <td>(</td>
          <td class="paramtype">real, intent(in)&#160;</td>
          <td class="paramname"><em>lat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, intent(in)&#160;</td>
          <td class="paramname"><em>lon</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the closest index (i,j) to the given (lat,lon) point. </p>
<p>This function searches a equator grid tile looking for the grid point closest to the give (lat, lon) location, and returns the i and j indexes of the point. </p><dl class="section return"><dt>Returns</dt><dd>The (i, j) location of the closest grid to the given (lat, lon) location. </dd>
<dd>
The (i, j) location of the closest grid to the given (lat, lon) location. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">lat</td><td>Latitude location </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lon</td><td>Longitude location </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="diag__grid_8F90_source.html#l00823">823</a> of file <a class="el" href="diag__grid_8F90_source.html">diag_grid.F90</a>.</p>

</div>
</div>
<a id="gad7bbed343758af1b76821fdf435217c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad7bbed343758af1b76821fdf435217c1">&#9670;&nbsp;</a></span>find_pole_index_agrid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pure integer function, dimension(2) diag_grid_mod::find_pole_index_agrid </td>
          <td>(</td>
          <td class="paramtype">real, intent(in)&#160;</td>
          <td class="paramname"><em>lat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, intent(in)&#160;</td>
          <td class="paramname"><em>lon</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the closest index (i,j) to the given (lat,lon) point. </p>
<p>This function searches a pole a-grid tile looking for the grid point closest to the give (lat, lon) location, and returns the i and j indexes of the point. </p><dl class="section return"><dt>Returns</dt><dd>The (i, j) location of the closest grid to the given (lat, lon) location. </dd>
<dd>
The (i, j) location of the closest grid to the given (lat, lon) location. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">lat</td><td>Latitude location </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lon</td><td>Longitude location </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="diag__grid_8F90_source.html#l00659">659</a> of file <a class="el" href="diag__grid_8F90_source.html">diag_grid.F90</a>.</p>

</div>
</div>
<a id="ga455fb5cb69db5917fc63612dcd5088cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga455fb5cb69db5917fc63612dcd5088cf">&#9670;&nbsp;</a></span>gcirdistance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pure elemental real function diag_grid_mod::gcirdistance </td>
          <td>(</td>
          <td class="paramtype">real, intent(in)&#160;</td>
          <td class="paramname"><em>lat1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, intent(in)&#160;</td>
          <td class="paramname"><em>lon1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, intent(in)&#160;</td>
          <td class="paramname"><em>lat2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, intent(in)&#160;</td>
          <td class="paramname"><em>lon2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find the distance, along the geodesic, between two points. </p>
<p><code>gCirDistance</code> will find the distance, along the geodesic, between two points defined by the (lat,lon) position of each point. </p><dl class="section return"><dt>Returns</dt><dd>real </dd></dl>

<p class="definition">Definition at line <a class="el" href="diag__grid_8F90_source.html#l01017">1017</a> of file <a class="el" href="diag__grid_8F90_source.html">diag_grid.F90</a>.</p>

</div>
</div>
<a id="gacd48f9784c8244ff7edc7c98f1ad51cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacd48f9784c8244ff7edc7c98f1ad51cd">&#9670;&nbsp;</a></span>get_local_indexes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public diag_grid_mod::get_local_indexes </td>
          <td>(</td>
          <td class="paramtype">real, intent(in)&#160;</td>
          <td class="paramname"><em>latStart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, intent(in)&#160;</td>
          <td class="paramname"><em>latEnd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, intent(in)&#160;</td>
          <td class="paramname"><em>lonStart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, intent(in)&#160;</td>
          <td class="paramname"><em>lonEnd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>istart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>iend</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>jstart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>jend</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find the local start and local end indexes on the local PE for regional output. </p>
<p>Given a defined region, find the local indexes on the local PE surrounding the region. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">latstart</td><td>lat start angles </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lonstart</td><td>lon start angles </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">latend</td><td>lat end angles </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lonend</td><td>lon end angles </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">istart</td><td>i start indexes </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">jstart</td><td>j start indexes </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">iend</td><td>i end indexes </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">jend</td><td>j end indexes </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="diag__grid_8F90_source.html#l00341">341</a> of file <a class="el" href="diag__grid_8F90_source.html">diag_grid.F90</a>.</p>

</div>
</div>
<a id="ga8809db19aeaef7fbd8a30a94017a45af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8809db19aeaef7fbd8a30a94017a45af">&#9670;&nbsp;</a></span>get_local_indexes2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public diag_grid_mod::get_local_indexes2 </td>
          <td>(</td>
          <td class="paramtype">real, intent(in)&#160;</td>
          <td class="paramname"><em>lat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, intent(in)&#160;</td>
          <td class="paramname"><em>lon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>iindex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>jindex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find the indices of the nearest grid point of the a-grid to the specified (lon,lat) location on the local PE. if desired point not within domain of local PE, return (0,0) as the indices. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">lat</td><td>lat location </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lon</td><td>lon location </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">iindex</td><td>i indexes </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">jindex</td><td>j indexes </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="diag__grid_8F90_source.html#l00590">590</a> of file <a class="el" href="diag__grid_8F90_source.html">diag_grid.F90</a>.</p>

</div>
</div>
<a id="ga38d32aee9fb2540ffdfb50354b799023"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga38d32aee9fb2540ffdfb50354b799023">&#9670;&nbsp;</a></span>latlon2xyz()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pure elemental type(<a class="el" href="structdiag__grid__mod_1_1point.html">point</a>) function diag_grid_mod::latlon2xyz </td>
          <td>(</td>
          <td class="paramtype">real, intent(in)&#160;</td>
          <td class="paramname"><em>lat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, intent(in)&#160;</td>
          <td class="paramname"><em>lon</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the (x,y,z) position of a given (lat,lon) point. </p>
<p>Given a specific (lat, lon) point on the Earth, return the corresponding (x,y,z) location. The return of latlon2xyz will be either a scalar or an array of the same size as lat and lon. </p><dl class="section return"><dt>Returns</dt><dd>The return of latlon2xyz will be either a scalar or an array of the same size as lat and lon. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">lat</td><td>The latitude of the (x,y,z) location to find. <code>lat</code> can be either a scalar or array. <code>lat</code> must be of the same rank / size as <code>lon</code>. This function assumes <code>lat</code> is in the range [-90,90]. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lon</td><td>The longitude of the (x,y,z) location to find. <code>lon</code> can be either a scalar or array. <code>lon</code> must be of the same rank / size as <code>lat</code>. This function assumes <code>lon</code> is in the range [0,360]. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="diag__grid_8F90_source.html#l00968">968</a> of file <a class="el" href="diag__grid_8F90_source.html">diag_grid.F90</a>.</p>

</div>
</div>
<a id="gafbf2ec20333592de7c79ad330b61ad2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafbf2ec20333592de7c79ad330b61ad2f">&#9670;&nbsp;</a></span>rad2deg()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pure elemental real function diag_grid_mod::rad2deg </td>
          <td>(</td>
          <td class="paramtype">real, intent(in)&#160;</td>
          <td class="paramname"><em>angle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">angle</td><td>Scalar or array of angles in radians. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="diag__grid_8F90_source.html#l00633">633</a> of file <a class="el" href="diag__grid_8F90_source.html">diag_grid.F90</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
