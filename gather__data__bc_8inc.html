<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FMS: fms2_io/include/gather_data_bc.inc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FMS
   &#160;<span id="projectnumber">2022.01.0-dev</span>
   </div>
   <div id="projectbrief">Flexible Modeling System</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('gather__data__bc_8inc.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">gather_data_bc.inc File Reference<div class="ingroups"><a class="el" href="group__fms2__io.html">FMS2 IO</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><a href="gather__data__bc_8inc_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:ad440f02265e003907bf2d8097b47eed7"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gather__data__bc_8inc.html#ad440f02265e003907bf2d8097b47eed7">gather_data_bc_2d</a> (fileobj, vdata, bc_info)</td></tr>
<tr class="memdesc:ad440f02265e003907bf2d8097b47eed7"><td class="mdescLeft">&#160;</td><td class="mdescRight">gathers the 2d vdata from all of the relevant pes into the root_pe and saves it to a buffer.  <a href="gather__data__bc_8inc.html#ad440f02265e003907bf2d8097b47eed7">More...</a><br /></td></tr>
<tr class="separator:ad440f02265e003907bf2d8097b47eed7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99a306d2b645cb196888fc967f2cd9d1"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gather__data__bc_8inc.html#a99a306d2b645cb196888fc967f2cd9d1">gather_data_bc_3d</a> (fileobj, vdata, bc_info)</td></tr>
<tr class="memdesc:a99a306d2b645cb196888fc967f2cd9d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">gathers the 2d vdata from all of the relevant pes into the root_pe and saves it to a buffer.  <a href="gather__data__bc_8inc.html#a99a306d2b645cb196888fc967f2cd9d1">More...</a><br /></td></tr>
<tr class="separator:a99a306d2b645cb196888fc967f2cd9d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="ad440f02265e003907bf2d8097b47eed7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad440f02265e003907bf2d8097b47eed7">&#9670;&nbsp;</a></span>gather_data_bc_2d()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine gather_data_bc_2d </td>
          <td>(</td>
          <td class="paramtype">class(fmsnetcdffile_t), intent(inout)&#160;</td>
          <td class="paramname"><em>fileobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">class(*), dimension(:,:), intent(in)&#160;</td>
          <td class="paramname"><em>vdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(bc_information), intent(inout)&#160;</td>
          <td class="paramname"><em>bc_info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>gathers the 2d vdata from all of the relevant pes into the root_pe and saves it to a buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">fileobj</td><td>Fms2io netcdf fileobj </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">vdata</td><td>Data to be gather </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">bc_info</td><td>information about the boundary condition variable </td></tr>
  </table>
  </dd>
</dl>
<p>Set the indices</p>
<p>This is the section of the PE that will actually be added to the global_buffer</p>
<p>Set up index shifts for global array</p>
<p>Only root allocates a global_buffer that will be written</p>
<p>Gather the data and calculate the checksum for the resulting array.</p>
<p>If the fileobj's root does not have data for this variable</p>
<p>Allocate global_buf_r4_kind to be one size bigger, global_buf_r4_kind(i_glob+1,,:) is just dummy data</p>
<p>Allocate a temp local buffer to the fileobj's root. This is needed because the data needs to be send to the fileobj's root, but because fileobj's root doesn't have any data, we just create dummy data and not write it later</p>
<p>If you are on fileobj's root, calculate the checksum and save the gathered data in a buffer</p>
<p>If the fileobj's root does not have data for this variable</p>
<p>Allocate global_buf_r8_kind to be one size bigger, global_buf_r8_kind(i_glob+1,,:) is just dummy data</p>
<p>Allocate a temp local buffer to the fileobj's root. This is needed because the data needs to be send to the fileobj's root, but because fileobj's root doesn't have any data, we just create dummy data and not write it later</p>
<p>If you are on fileobj's root, calculate the checksum and save the gathered data in a buffer</p>
<p>Save the checksum, so you can write it later</p>

<p class="definition">Definition at line <a class="el" href="gather__data__bc_8inc_source.html#l00025">25</a> of file <a class="el" href="gather__data__bc_8inc_source.html">gather_data_bc.inc</a>.</p>

</div>
</div>
<a id="a99a306d2b645cb196888fc967f2cd9d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99a306d2b645cb196888fc967f2cd9d1">&#9670;&nbsp;</a></span>gather_data_bc_3d()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine gather_data_bc_3d </td>
          <td>(</td>
          <td class="paramtype">class(fmsnetcdffile_t), intent(inout)&#160;</td>
          <td class="paramname"><em>fileobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">class(*), dimension(:,:,:), intent(in)&#160;</td>
          <td class="paramname"><em>vdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(bc_information), intent(inout)&#160;</td>
          <td class="paramname"><em>bc_info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>gathers the 2d vdata from all of the relevant pes into the root_pe and saves it to a buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">fileobj</td><td>Fms2io netcdf fileobj </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">vdata</td><td>Data to be gather </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">bc_info</td><td>information about the boundary condition variable </td></tr>
  </table>
  </dd>
</dl>
<p>Set the indices</p>
<p>This is the section of the PE that will actually be added to the global_buffer</p>
<p>Set up index shifts for global array</p>
<p>Allocate a global_buffer that will be written</p>
<p>Gather the data and calculate the checksum for the resulting array.</p>
<p>If the fileobj's root does not have data for this variable</p>
<p>Allocate global_buf_r8_kind to be one size bigger, global_buf_r8_kind(i_glob+1,,:) is just dummy data</p>
<p>Allocate a temp local buffer to the fileobj's root. This is needed because the data needs to be send to the fileobj's root, but because fileobj's root doesn't have any data, we just create dummy data and not write it later</p>
<p>If you are on fileobj's root, calculate the checksum and save the gathered data in a buffer</p>
<p>If the fileobj's root does not have data for this variable</p>
<p>Allocate global_buf_r8_kind to be one size bigger, global_buf_r8_kind(i_glob+1,,:) is just dummy data</p>
<p>Allocate a temp local buffer to the fileobj's root. This is needed because the data needs to be send to the fileobj's root, but because fileobj's root doesn't have any data, we just create dummy data and not write it later</p>
<p>If you are on fileobj's root, calculate the checksum and save the gathered data in a buffer</p>
<p>Save the checksum, so you can write it later</p>

<p class="definition">Definition at line <a class="el" href="gather__data__bc_8inc_source.html#l00145">145</a> of file <a class="el" href="gather__data__bc_8inc_source.html">gather_data_bc.inc</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_0b23f86593b5beae7fad04a40cca3c16.html">fms2_io</a></li><li class="navelem"><a class="el" href="dir_731df1d3823ee5b9df3d8fffb0d31a46.html">include</a></li><li class="navelem"><a class="el" href="gather__data__bc_8inc.html">gather_data_bc.inc</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
